{
  "name": "botracers",
  "displayName": "BotRacers",
  "description": "Integrated BotRacers workflow for bot build, upload, and artifact management",
  "version": "0.1.0",
  "publisher": "botracers",
  "engines": {
    "vscode": "^1.90.0"
  },
  "categories": ["Other"],
  "activationEvents": ["onStartupFinished"],
  "main": "./out/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "botracers.configureServer",
        "title": "Configure Server URL",
        "category": "BotRacers",
        "icon": "$(gear)"
      },
      {
        "command": "botracers.login",
        "title": "Login",
        "category": "BotRacers"
      },
      {
        "command": "botracers.initializeBotProject",
        "title": "Initialize Bot Project",
        "category": "BotRacers"
      },
      {
        "command": "botracers.openBotProject",
        "title": "Open Bot Project",
        "category": "BotRacers"
      },
      {
        "command": "botracers.view.refresh",
        "title": "Refresh",
        "category": "BotRacers",
        "icon": "$(refresh)"
      },
      {
        "command": "botracers.view.buildAndUpload",
        "title": "Build & Upload",
        "category": "BotRacers",
        "icon": "$(cloud-upload)"
      },
      {
        "command": "botracers.view.buildBinary",
        "title": "Build Binary",
        "category": "BotRacers",
        "icon": "$(chip)"
      },
      {
        "command": "botracers.view.revealElfPath",
        "title": "Reveal ELF Path",
        "category": "BotRacers",
        "icon": "$(folder-opened)"
      },
      {
        "command": "botracers.view.replaceArtifact",
        "title": "Replace Artifact",
        "category": "BotRacers",
        "icon": "$(replace)"
      },
      {
        "command": "botracers.view.deleteArtifact",
        "title": "Delete Artifact",
        "category": "BotRacers",
        "icon": "$(trash)"
      },
      {
        "command": "botracers.view.toggleVisibility",
        "title": "Toggle Artifact Visibility",
        "category": "BotRacers",
        "icon": "$(eye)"
      }
    ],
    "views": {
      "explorer": [
        {
          "id": "botracers.explorer",
          "name": "BotRacers",
          "icon": "media/botracers.svg"
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "botracers.explorer",
        "contents": "Sign in to BotRacers to manage artifacts.\n[Login](command:botracers.login)\n[Configure Server URL](command:botracers.configureServer)",
        "when": "botracers.state == loggedOut && botracers.stateDetail == notLoggedIn"
      },
      {
        "view": "botracers.explorer",
        "contents": "Session expired. Sign in again.\n[Login](command:botracers.login)\n[Configure Server URL](command:botracers.configureServer)",
        "when": "botracers.state == loggedOut && botracers.stateDetail == sessionExpired"
      },
      {
        "view": "botracers.explorer",
        "contents": "Could not reach BotRacers. Check server profile and retry.\n[Configure Server URL](command:botracers.configureServer)\n[Refresh](command:botracers.view.refresh)",
        "when": "botracers.state == loggedOut && botracers.stateDetail == requestError"
      },
      {
        "view": "botracers.explorer",
        "contents": "Open or initialize a bot workspace to continue.\n[Initialize Bot Project](command:botracers.initializeBotProject)\n[Open Bot Project](command:botracers.openBotProject)",
        "when": "botracers.state == needsWorkspace && botracers.stateDetail == workspaceMissing"
      },
      {
        "view": "botracers.explorer",
        "contents": "Workspace found, but no Rust binaries were discovered.\n[Initialize Bot Project](command:botracers.initializeBotProject)\n[Open Bot Project](command:botracers.openBotProject)\n[Refresh](command:botracers.view.refresh)",
        "when": "botracers.state == needsWorkspace && botracers.stateDetail == noBinaries"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "botracers.view.refresh",
          "when": "view == botracers.explorer",
          "group": "navigation@1"
        },
        {
          "command": "botracers.configureServer",
          "when": "view == botracers.explorer",
          "group": "navigation@2"
        }
      ],
      "view/item/context": [
        {
          "command": "botracers.view.buildAndUpload",
          "when": "view == botracers.explorer && viewItem == localBin",
          "group": "inline@1"
        },
        {
          "command": "botracers.view.buildBinary",
          "when": "view == botracers.explorer && viewItem == localBin",
          "group": "inline@2"
        },
        {
          "command": "botracers.view.revealElfPath",
          "when": "view == botracers.explorer && viewItem == localBin",
          "group": "inline@3"
        },
        {
          "command": "botracers.view.buildBinary",
          "when": "view == botracers.explorer && viewItem == localBin",
          "group": "navigation@1"
        },
        {
          "command": "botracers.view.revealElfPath",
          "when": "view == botracers.explorer && viewItem == localBin",
          "group": "navigation@2"
        },
        {
          "command": "botracers.view.replaceArtifact",
          "when": "view == botracers.explorer && viewItem == remoteArtifactOwned",
          "group": "inline@1"
        },
        {
          "command": "botracers.view.replaceArtifact",
          "when": "view == botracers.explorer && viewItem == remoteArtifactOwned",
          "group": "navigation@0"
        },
        {
          "command": "botracers.view.toggleVisibility",
          "when": "view == botracers.explorer && viewItem == remoteArtifactOwned",
          "group": "inline@2"
        },
        {
          "command": "botracers.view.deleteArtifact",
          "when": "view == botracers.explorer && viewItem == remoteArtifactOwned",
          "group": "inline@3"
        },
        {
          "command": "botracers.view.toggleVisibility",
          "when": "view == botracers.explorer && viewItem == remoteArtifactOwned",
          "group": "navigation@1"
        },
        {
          "command": "botracers.view.deleteArtifact",
          "when": "view == botracers.explorer && viewItem == remoteArtifactOwned",
          "group": "navigation@2"
        }
      ]
    },
    "configuration": {
      "title": "BotRacers",
      "properties": {
        "botracers.serverProfile": {
          "type": "string",
          "enum": ["production", "localhost", "custom"],
          "default": "production",
          "description": "Server profile used by BotRacers extension requests"
        },
        "botracers.customServerUrl": {
          "type": "string",
          "default": "",
          "description": "Custom BotRacers URL used when serverProfile is custom"
        },
        "botracers.defaultArtifactTarget": {
          "type": "string",
          "default": "riscv32imafc-unknown-none-elf",
          "description": "Default Rust target triple for build and upload"
        },
        "botracers.botWorkspacePath": {
          "type": "string",
          "default": "",
          "description": "Optional absolute/relative path to bot workspace root when it differs from the open folder"
        }
      }
    }
  },
  "scripts": {
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./"
  },
  "devDependencies": {
    "@types/node": "^20.12.0",
    "@types/vscode": "^1.90.0",
    "typescript": "^5.4.5"
  }
}
