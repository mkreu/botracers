{
  "name": "programming-game-racehub",
  "displayName": "Programming Game RaceHub",
  "description": "Integrated RaceHub workflow for bot build, upload, and artifact management",
  "version": "0.1.0",
  "publisher": "programming-game",
  "engines": {
    "vscode": "^1.90.0"
  },
  "categories": ["Other"],
  "activationEvents": ["onStartupFinished"],
  "main": "./out/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "racehub.configureServer",
        "title": "Configure Server URL",
        "category": "RaceHub",
        "icon": "$(gear)"
      },
      {
        "command": "racehub.login",
        "title": "Login",
        "category": "RaceHub"
      },
      {
        "command": "racehub.initializeBotProject",
        "title": "Initialize Bot Project",
        "category": "RaceHub"
      },
      {
        "command": "racehub.openBotProject",
        "title": "Open Bot Project",
        "category": "RaceHub"
      },
      {
        "command": "racehub.view.refresh",
        "title": "Refresh",
        "category": "RaceHub",
        "icon": "$(refresh)"
      },
      {
        "command": "racehub.view.buildAndUpload",
        "title": "Build & Upload",
        "category": "RaceHub",
        "icon": "$(cloud-upload)"
      },
      {
        "command": "racehub.view.buildBinary",
        "title": "Build Binary",
        "category": "RaceHub",
        "icon": "$(chip)"
      },
      {
        "command": "racehub.view.revealElfPath",
        "title": "Reveal ELF Path",
        "category": "RaceHub",
        "icon": "$(folder-opened)"
      },
      {
        "command": "racehub.view.replaceArtifact",
        "title": "Replace Artifact",
        "category": "RaceHub",
        "icon": "$(replace)"
      },
      {
        "command": "racehub.view.deleteArtifact",
        "title": "Delete Artifact",
        "category": "RaceHub",
        "icon": "$(trash)"
      },
      {
        "command": "racehub.view.toggleVisibility",
        "title": "Toggle Artifact Visibility",
        "category": "RaceHub",
        "icon": "$(eye)"
      }
    ],
    "views": {
      "explorer": [
        {
          "id": "racehub.explorer",
          "name": "RaceHub",
          "icon": "media/racehub.svg"
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "racehub.explorer",
        "contents": "Sign in to RaceHub to manage artifacts.\n[Login](command:racehub.login)\n[Configure Server URL](command:racehub.configureServer)",
        "when": "racehub.state == loggedOut && racehub.stateDetail == notLoggedIn"
      },
      {
        "view": "racehub.explorer",
        "contents": "Session expired. Sign in again.\n[Login](command:racehub.login)\n[Configure Server URL](command:racehub.configureServer)",
        "when": "racehub.state == loggedOut && racehub.stateDetail == sessionExpired"
      },
      {
        "view": "racehub.explorer",
        "contents": "Could not reach RaceHub. Check server profile and retry.\n[Configure Server URL](command:racehub.configureServer)\n[Refresh](command:racehub.view.refresh)",
        "when": "racehub.state == loggedOut && racehub.stateDetail == requestError"
      },
      {
        "view": "racehub.explorer",
        "contents": "Open or initialize a bot workspace to continue.\n[Initialize Bot Project](command:racehub.initializeBotProject)\n[Open Bot Project](command:racehub.openBotProject)",
        "when": "racehub.state == needsWorkspace && racehub.stateDetail == workspaceMissing"
      },
      {
        "view": "racehub.explorer",
        "contents": "Workspace found, but no Rust binaries were discovered.\n[Initialize Bot Project](command:racehub.initializeBotProject)\n[Open Bot Project](command:racehub.openBotProject)\n[Refresh](command:racehub.view.refresh)",
        "when": "racehub.state == needsWorkspace && racehub.stateDetail == noBinaries"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "racehub.view.refresh",
          "when": "view == racehub.explorer",
          "group": "navigation@1"
        },
        {
          "command": "racehub.configureServer",
          "when": "view == racehub.explorer",
          "group": "navigation@2"
        }
      ],
      "view/item/context": [
        {
          "command": "racehub.view.buildAndUpload",
          "when": "view == racehub.explorer && viewItem == localBin",
          "group": "inline@1"
        },
        {
          "command": "racehub.view.buildBinary",
          "when": "view == racehub.explorer && viewItem == localBin",
          "group": "inline@2"
        },
        {
          "command": "racehub.view.revealElfPath",
          "when": "view == racehub.explorer && viewItem == localBin",
          "group": "inline@3"
        },
        {
          "command": "racehub.view.buildBinary",
          "when": "view == racehub.explorer && viewItem == localBin",
          "group": "navigation@1"
        },
        {
          "command": "racehub.view.revealElfPath",
          "when": "view == racehub.explorer && viewItem == localBin",
          "group": "navigation@2"
        },
        {
          "command": "racehub.view.replaceArtifact",
          "when": "view == racehub.explorer && viewItem == remoteArtifactOwned",
          "group": "inline@1"
        },
        {
          "command": "racehub.view.replaceArtifact",
          "when": "view == racehub.explorer && viewItem == remoteArtifactOwned",
          "group": "navigation@0"
        },
        {
          "command": "racehub.view.toggleVisibility",
          "when": "view == racehub.explorer && viewItem == remoteArtifactOwned",
          "group": "inline@2"
        },
        {
          "command": "racehub.view.deleteArtifact",
          "when": "view == racehub.explorer && viewItem == remoteArtifactOwned",
          "group": "inline@3"
        },
        {
          "command": "racehub.view.toggleVisibility",
          "when": "view == racehub.explorer && viewItem == remoteArtifactOwned",
          "group": "navigation@1"
        },
        {
          "command": "racehub.view.deleteArtifact",
          "when": "view == racehub.explorer && viewItem == remoteArtifactOwned",
          "group": "navigation@2"
        }
      ]
    },
    "configuration": {
      "title": "RaceHub",
      "properties": {
        "racehub.serverProfile": {
          "type": "string",
          "enum": ["production", "localhost", "custom"],
          "default": "production",
          "description": "Server profile used by RaceHub extension requests"
        },
        "racehub.customServerUrl": {
          "type": "string",
          "default": "",
          "description": "Custom RaceHub URL used when serverProfile is custom"
        },
        "racehub.defaultArtifactTarget": {
          "type": "string",
          "default": "riscv32imafc-unknown-none-elf",
          "description": "Default Rust target triple for build and upload"
        },
        "racehub.botWorkspacePath": {
          "type": "string",
          "default": "",
          "description": "Optional absolute/relative path to bot workspace root when it differs from the open folder"
        }
      }
    }
  },
  "scripts": {
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./"
  },
  "devDependencies": {
    "@types/node": "^20.12.0",
    "@types/vscode": "^1.90.0",
    "typescript": "^5.4.5"
  }
}
